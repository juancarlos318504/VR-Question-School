(this.webpackJsonpvideorecording=this.webpackJsonpvideorecording||[]).push([[0],{20:function(e,t,a){e.exports=a(39)},25:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),o=a(18),r=a.n(o),s=(a(25),a(7)),i=a(11),l=a.n(i),u=a(19),m=a.n(u),d=a(8);var b=function(){var e=Object(n.useState)(0),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(""),u=Object(s.a)(r,2),b=u[0],p=u[1],v=Object(n.useState)(1),f=Object(s.a)(v,2),g=f[0],h=f[1],w=Object(n.useState)(0),j=Object(s.a)(w,2),y=j[0],E=j[1],O=new i.UnityContent("/VR-Question-School/MyGame/360_vr_rh_build.json","/VR-Question-School/MyGame/UnityLoader.js");O.on("createVideo",(function(e){o(parseInt(e))})),O.on("numberQuestion",(function(e){h(e)})),O.on("userName",(function(e){p(e)})),O.on("progress",(function(e){E(100*e)}));var k=d.storage(),N=d.database(),R=Object(n.useState)(!1),S=Object(s.a)(R,2),U=S[0],C=S[1],I=Object(n.useState)([]),L=Object(s.a)(I,2),M=L[0],x=L[1],B=Object(n.useRef)(null),V=Object(n.useRef)(null),q=Object(n.useCallback)((function(e){var t=e.data;t.size>0&&x((function(e){return e.concat(t)}))}),[x]),z=Object(n.useCallback)((function(){C(!0),V.current=new MediaRecorder(B.current.stream,{mimeType:"video/webm"}),V.current.addEventListener("dataavailable",q),V.current.start()}),[q]),D=Object(n.useCallback)((function(){V.current.stop(),C(!1)}),[V]),G=Object(n.useCallback)((function(){var e=b;if(console.log(e),M.length){var t=new Blob(M,{type:"video/webm"});k.ref("/videos/".concat(e,"/pregunta-").concat(g,".webm")).put(t).then((function(t){t.ref.getDownloadURL().then((function(t){console.log(t),N.ref("users/".concat(e,"/answers/").concat(g)).update({url:t}),console.log("gg"),O.send("Menu","nextQuestion"),o(0),h(2)})),console.log("Uploaded a blob or file!")}));var a=URL.createObjectURL(t),n=document.createElement("a");document.body.appendChild(n),n.style="display: none",n.href=a,n.download="video-".concat(e,"-pregunta-").concat(g,".webm"),n.click(),window.URL.revokeObjectURL(a),x([])}}),[g,b,M,k]);return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"row justify-content-center mt-4"},c.a.createElement("div",{className:"col-md-8",style:{height:"35em",display:1!==a?"block":"none"}},c.a.createElement(l.a,{unityContent:O}),y>=100?"":c.a.createElement("div",{className:"progress"},c.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(y,"%")},"aria-valuenow":y,"aria-valuemin":"0","aria-valuemax":"100"},"".concat(Math.round(y),"%"))))),c.a.createElement("div",{className:"row justify-content-center"},1===a?c.a.createElement("div",{className:"col-md-8"},c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-md-10"},c.a.createElement("p",null,"Seg\xfan la pregunta anterior, comparta su respuesta, pulsando en el bot\xf3n iniciar grabaci\xf3n."),c.a.createElement(m.a,{className:"embed-responsive mt",audio:!0,ref:B,style:{maxHeight:"35em"}}))),c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-md-10"},U?c.a.createElement("button",{className:"btn btn-danger btn-lg btn-block m-2",onClick:D},"Parar Grabaci\xf3n"):c.a.createElement("button",{className:"btn btn-success btn-lg btn-block m-2",onClick:z},"Iniciar Grabaci\xf3n"),M.length>0&&c.a.createElement("button",{className:"btn btn-primary btn-lg btn-block m-2",onClick:function(){return G(b)}},"Descargar y Enviar Video Respuesta"))))):""))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var p={apiKey:"AIzaSyB87hUpHIVwPyeYy4AmNuftz3-DrtbUxw0",authDomain:"vr-questions-school.firebaseapp.com",databaseURL:"https://vr-questions-school.firebaseio.com",projectId:"vr-questions-school",storageBucket:"vr-questions-school.appspot.com",messagingSenderId:"540938104666",appId:"1:540938104666:web:9b55e10bc937a6f30ecd63"};d.initializeApp(p),r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.667c4431.chunk.js.map